import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { TextInput, Button, FormField, FormFieldMessage, Box, FormFieldTooltip } from '../../../src/components/';
import { StoryHelper } from './StoryHelper';
import { Nodes } from '../../../src/helpers/Nodes';

<Meta title="Components/TextInput" component={TextInput} />

~~~js
import { TextInput } from '@deliveryhero/armor';
~~~

## Basic usage

<Preview>
    <Story name="Basic usage" height="100px">
        <TextInput label="First name" name="first_name" />
    </Story>
</Preview>

## Disabled

<Preview>
    <Story name="Disabled" height="100px">
        <TextInput label="First name" name="first_name" disabled />
    </Story>
</Preview>

## Readonly

<Preview>
    <Story name="Readonly" height="100px">
        <>
            <TextInput label="First name" name="first_name" readOnly defaultValue="Joe" />
            <TextInput label="Last name missing" name="last_name" readOnly marginLeft={2} />
        </>
    </Story>
</Preview>

## Error state

<Preview>
    <Story name="Error state" height="100px">
        <FormField autoMargin>
                <TextInput label="First name" name="first_name" defaultValue="42" error />
            <FormFieldMessage error oneLine>
                Please provide a valid name
            </FormFieldMessage>
        </FormField>
    </Story>
</Preview>

## Inline

~~~js
import { TextInput, Button } from '@deliveryhero/armor';
~~~

<Preview>
    <Story name="Inline" height="100px">
        <>
            <TextInput label="First name" name="first_name" defaultValue="Joe" />
            <TextInput label="Last name" name="last_name" defaultValue="Smith" marginLeft={2} />
            <Button marginLeft={2}>Submit</Button>
        </>
    </Story>
</Preview>

## Wide

<Preview>
    <Story name="Wide" height="100px">
        <TextInput label="First name" name="first_name" wide />
    </Story>
</Preview>

## Large

<Preview>
    <Story name="Large" height="100px">
        <>
            <TextInput label="First name" name="first_name" defaultValue="Joe" />
            <TextInput label="Last name" name="last_name" defaultValue="Smith" marginLeft={2} large />
        </>
    </Story>
</Preview>

## No autocomplete

<Preview>
    <Story name="No autocomplete" height="100px">
        <TextInput label="First name" name="first_name" autoComplete="off" />
    </Story>
</Preview>

## Multiline

<Preview>
    <Story name="Multiline" height="240px">
        <TextInput label="Tell me how you have spent your summer" name="essay" multiline rows={5} minWidth="50%" />
    </Story>
</Preview>

## With a hint

~~~js
import { TextInput, FormFieldMessage, Box } from '@deliveryhero/armor';
~~~

<Preview>
    <Story name="With a hint" height="100px">
        <Box width="50%">
            <TextInput label="First name" name="first_name" defaultValue="Joe" wide />
            <FormFieldMessage>Please specify your first name exactly how it is in your ID</FormFieldMessage>
        </Box>
    </Story>
</Preview>

## In a form field

~~~js
import { TextInput, FormFieldMessage, FormField, FormFieldTooltip, Button } from '@deliveryhero/armor';
~~~

<Preview>
    <Story name="In a form field" height="320px">
        <StoryHelper>
            {({ error, setError }) => (
    <form onSubmit={(event) => {setError("Not the droids you are looking for"); event.preventDefault();}}>
        <h1>Droid search application form</h1>
        <FormField width="50%">
            <TextInput
                label="Droid name"
                name="droid_name"
                error={!!error}
                wide
            />
            <FormFieldMessage error oneLine>
                {error}
            </FormFieldMessage>
            <FormFieldTooltip visible={!!error}>
                {error}
            </FormFieldTooltip>
        </FormField>
        <FormField width="50%">
            <TextInput
                label="Owner name"
                name="owner_name"
                wide
            />
        </FormField>
        <Button
            type="submit"
            marginTop={4}
        >
            Submit
        </Button>
        <Button
            tertiary
            onClick={() => setError("")}
            marginLeft={2}
            marginTop={4}
        >
            Reset
        </Button>
    </form>
)}
</StoryHelper>
    </Story>
</Preview>

## Properties

<Props of={TextInput} />

## Nodes

<Nodes 
    blockName="TextInput"
    nodes={[
        { element: 'Root', modifier: 'disabled', description: 'Root element when disabled' },
        { element: 'Root', modifier: 'wide', description: 'Root element when big' },
        { element: 'Root', modifier: 'error', description: 'Root element when errored' },
        { element: 'Input', description: 'Native input element' },
        { element: 'Label', description: 'Input label' },
        { element: 'LabelBackground', description: 'Input label background' },
    ]}
/>
