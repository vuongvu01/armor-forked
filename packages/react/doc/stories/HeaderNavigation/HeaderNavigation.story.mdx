import { useState } from 'react';
import { BrowserRouter, Link } from 'react-router-dom';
import { Meta, Preview, Props, Story } from '@storybook/addon-docs/blocks';
import { LogoutIcon } from '@deliveryhero/armor-icons';

import {
    HeaderNavigation,
    HeaderNavigationMenuContent,
    HeaderNavigationMenuContentBody,
    HeaderNavigationMenuContentHeader,
    HeaderNavigationAction,
    HeaderNavigationActionItem,
    HeaderNavigationLink,
    HeaderNavigationLinks,
    HeaderNavigationTitle,
    HeaderNavigationSelector,
    HeaderNavigationSearch,
} from 'src/components';
import {Image} from "../../../src/components/HeaderNavigation/__story__/Image";

<Meta title="Components/HeaderNavigation" component={HeaderNavigation} />

```js
import {
    HeaderNavigation,
    HeaderNavigationTitle,
    HeaderNavigationMenuContent,
    HeaderNavigationMenuContentBody,
    HeaderNavigationMenuContentHeader,
    HeaderNavigationLinks,
    HeaderNavigationLink,
    HeaderNavigationSearch,
    HeaderNavigationSelector,
    HeaderNavigationAction,
    HeaderNavigationActionItem,
} from '@deliveryhero/armor';
```

## Extensive Scenario

<Preview>
    <Story name="ExtensiveScenario" height="600px">
        {() => {
            const accountsLinkName = 'Accounts';
            const vendorsLinkName = 'Vendors';
            const foodOptions = [
                { value: 0, label: 'Biryani' },
                { value: 1, label: 'Tacos' },
                {
                    value: 2,
                    label:
                        'This is a very long label that needs to be truncated with an ellipsis',
                },
                { value: 3, label: 'Risotto' },
                { value: 4, label: 'Pizza' },
                { value: 5, label: 'Enchiladas' },
                { value: 6, label: 'Börek' },
                { value: 7, label: 'Quiche' },
                { value: 8, label: 'Köfte' },
                { value: 9, label: 'Pad Thai' },
                { value: 10, label: 'Churrasco' },
                { value: 11, label: 'Baozi' },
                { value: 12, label: 'Ceviche' },
                { value: 13, label: 'Mac & Cheese' },
                { value: 14, label: 'Paella' },
                { value: 15, label: 'Dim sum' },
                { value: 16, label: 'Hamburger' },
                { value: 17, label: 'Ramen' },
                { value: 18, label: 'Sushi' },
                { value: 19, label: 'Burrito' },
            ];
            const restaurantsMenuContentBodyOptions = [
                {
                    category: 'General tools',
                    label: 'General tools',
                    value: 'cat_0',
                    options: [
                        {
                            value: 'value_0',
                            label: 'CAS',
                        },
                        {
                            value: 'value_1',
                            label: 'Vendor Monitor',
                        },
                        {
                            value: 'value_2',
                            label: 'Vendor Management',
                        },
                        {
                            value: 'value_3',
                            label: 'Test Order Tool',
                        },
                        {
                            value: 'value_4',
                            label: 'Device Management',
                        },
                    ],
                },
                {
                    category: 'POS Vendor Tools',
                    label: 'POS Vendor Tools',
                    value: 'cat_0',
                    options: [
                        {
                            value: 'value_5',
                            label: 'POS Credentials',
                        },
                        {
                            value: 'value_6',
                            label: 'Menu Importer',
                        },
                        {
                            value: 'value_7',
                            label: 'Middleware',
                        },
                    ],
                },
            ];
            const selectorParams = {
                label: 'Platform and Country',
                isMultiselect: false,
                options: [
                    { value: 0, label: 'Japan' },
                    { value: 1, label: 'Laos' },
                    { value: 2, label: 'Sweden' },
                    { value: 3, label: 'Vietnam' },
                ],
            };
            const [productSelected, setProductSelected] = useState(
                restaurantsMenuContentBodyOptions[0].options[0].label,
            );
            const [selectedValue, setSelectedValue] = useState('value_0');
            const [searchQuery, setSearchQuery] = useState('');
            const [countrySelected, setCountrySelected] = useState('');
            const [selectedLinkName, setSelectedLinkName] = useState(
                accountsLinkName,
            );
            const handleOptionSelect = (selectedItem) => {
                setSelectedValue(selectedItem?.value);
                setProductSelected(selectedItem?.label);
                console.log('handleOptionSelect', { selectedItem });
            };
            const handleSearchChange = (event) => {
                const query = event?.target?.value || '';
                setSearchQuery(query);
                console.log({ query });
            };
            const handleSearchItemSelect = (option) => {
                setSearchQuery(option.label);
                console.log({ option });
            };
            const handleSelect = (
                selectedOption,
                itemIndex,
        ) => {
                console.log('selected', { selectedOption, itemIndex });
                return setCountrySelected(
                    typeof selectedOption === 'string'
                        ? selectedOption
                        : selectedOption?.label
                );
            };
            const handleLinkClick = (name) => {
                console.log('link clicked', { name });
                return setSelectedLinkName(name);
            };
            const homeLink = '/accounts';
            return (
                <BrowserRouter>
                    <HeaderNavigation
title={<HeaderNavigationTitle
    tag={Link}
    to={homeLink}
    name={accountsLinkName}
    onLinkClick={handleLinkClick}
>
    {productSelected}
</HeaderNavigationTitle>}
navigationMenuContent={
    <HeaderNavigationMenuContent>
        <HeaderNavigationMenuContentHeader
            title="Restaurant"
            label="Backoffice"
            image={<Image />}
        />
        <HeaderNavigationMenuContentBody
            options={restaurantsMenuContentBodyOptions}
            selectedValue={selectedValue}
            onOptionSelect={handleOptionSelect}
        />
    </HeaderNavigationMenuContent>
}
links={
<HeaderNavigationLinks onLinkClick={handleLinkClick}>
    <HeaderNavigationLink
        name={accountsLinkName}
        isActive={accountsLinkName === selectedLinkName}
        tag={Link}
        to={homeLink}
    >
        Accounts
    </HeaderNavigationLink>
    <HeaderNavigationLink
        name={vendorsLinkName}
        isActive={vendorsLinkName === selectedLinkName}
        tag={Link}
        to="/vendors"
    >
        Vendors
    </HeaderNavigationLink>
</HeaderNavigationLinks>
}
search={
    <HeaderNavigationSearch
        options={foodOptions}
        onChange={handleSearchChange}
        onItemSelect={handleSearchItemSelect}
    />
}
selector={
    <HeaderNavigationSelector
        navigationSelectorParams={selectorParams}
        onOptionSelect={handleSelect}
    />
}
navigationAction={(
    <HeaderNavigationAction>
        <HeaderNavigationActionItem>
            <LogoutIcon
                style={{ paddingTop: '8px', paddingBottom: '0' }}
                onClick={() => {
                    console.log('Log out');
                }}
            />
        </HeaderNavigationActionItem>
    </HeaderNavigationAction>
)}
    />
    <div style={{paddingTop: '100px'}}>
        <p>
            Selected product: <strong>{productSelected}</strong>
        </p>
        <p>
            Navigated link: <strong>{selectedLinkName}</strong>{' '}
        </p>
        <p>
            Search query: <strong>{searchQuery}</strong>{' '}
        </p>
        <p>
            Platform/Country: <strong>{countrySelected}</strong>{' '}
        </p>
    </div>
</BrowserRouter>
            );
        }}
    </Story>
</Preview>

## Properties HeaderNavigation

<Props of={HeaderNavigation} />

## Properties HeaderNavigationTitle

<Props of={HeaderNavigationTitle} />

## Properties HeaderNavigationMenuContent

<Props of={HeaderNavigationMenuContent} />

## Properties HeaderNavigationMenuContentHeader

<Props of={HeaderNavigationMenuContentHeader} />

## Properties HeaderNavigationMenuContentBody

<Props of={HeaderNavigationMenuContentBody} />

## Properties HeaderNavigationLinks

<Props of={HeaderNavigationLinks} />

## Properties HeaderNavigationLink

<Props of={HeaderNavigationLink} />

## Properties HeaderNavigationSearch

<Props of={HeaderNavigationSearch} />

## Properties HeaderNavigationSelector

<Props of={HeaderNavigationSelector} />

## Properties HeaderNavigationAction

<Props of={HeaderNavigationAction} />

## Properties HeaderNavigationActionItem

<Props of={HeaderNavigationActionItem} />
