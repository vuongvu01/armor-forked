import {useState} from 'react'
import {Meta, Preview, Story} from '@storybook/addon-docs/blocks';
import {Box, Button, Dropdown, Typography} from '../../../src/components';
import {GroupHelper} from '../../../src/helpers/GroupHelper';

<Meta title="Components/Dropdown" component={Dropdown} />

~~~js
import { Dropdown } from '@deliveryhero/armor';
~~~

## Minimum configuration

<Preview>
    <Story name="Minimum configuration" height="350px">
         {() => {
const [selectedOption, setSelectedOption] = useState();
const handleSelect = (option) => {
    setSelectedOption(option);
};
return (
    <>
        <GroupHelper gap={2}>
            <Box padding={3}>
                <Dropdown
                    options={['Biryani', 'Tacos', 'Pho', 'Risotto']}
                    onSelect={handleSelect}
                    label="Dish type"
                />
                <Typography paragraph>
                    Selected value: {JSON.stringify(selectedOption)}
                </Typography>
            </Box>
        </GroupHelper>
    </>
);
                 }}
    </Story>
</Preview>

## Custom Option Item Format

<Preview>
    <Story name="Custom Option Item Format" height="750px">
         {() => {
const foodOptions = [
        { value: 0, label: 'Biryani' },
        { value: 1, label: 'Tacos' },
        { value: 2, label: 'Pho' },
        { value: 3, label: 'Risotto' },
        { value: 4, label: 'Pizza' },
        { value: 5, label: 'Enchiladas' },
        { value: 6, label: 'Börek' },
        { value: 7, label: 'Quiche' },
        { value: 8, label: 'Köfte' },
        { value: 9, label: 'Pad Thai' },
        { value: 10, label: 'Churrasco' },
        { value: 11, label: 'Baozi' },
        { value: 12, label: 'Ceviche' },
        { value: 13, label: 'Mac & Cheese' },
        { value: 14, label: 'Paella' },
        { value: 15, label: 'Dim sum' },
        { value: 16, label: 'Hamburger' },
        { value: 17, label: 'Ramen' },
        { value: 18, label: 'Sushi' },
        { value: 19, label: 'Burrito' },
    ];
const [selectedOption, setSelectedOption] = useState();
const handleSelect = (option) => {
    setSelectedOption(option);
};
return (
    <>
        <GroupHelper gap={2}>
            <Box padding={3} style={{
                flexDirection: 'column',
                width: '300px'
                }}>
                <Dropdown
                    options={foodOptions}
                    onSelect={handleSelect}
                    label="Dish type"
                />
                <Typography paragraph>
                    Selected value: {JSON.stringify(selectedOption)}
                </Typography>
            </Box>
        </GroupHelper>
    </>
);
                 }}
    </Story>
</Preview>

## Pre-selected Value

<Preview>
    <Story name="Pre-selected Value" height="500px">
         {() => {
const foodOptionsString = [
        'Biryani',
        'Tacos',
        'Pho',
        'Risotto',
        'Pizza',
        'Enchiladas',
        'Börek',
        'Quiche',
        'Köfte',
        'Pad Thai',
        'Churrasco',
        'Baozi',
        'Ceviche',
        'Mac & Cheese',
        'Paella',
        'Dim sum',
        'Hamburger',
        'Ramen',
        'Sushi',
        'Burrito',
    ];
    const initialSelectionIndex = 3;
    const [selectedOption, setSelectedOption] = useState(
        foodOptionsString[initialSelectionIndex],
    );
    const handleSelect = (option) => {
        setSelectedOption(option);
    };
    return (
        <>
            <GroupHelper gap={2}>
                <Box padding={3} style={{ flexDirection: 'column', width: '300px' }}>
                    <Dropdown
                        options={foodOptionsString}
                        onSelect={handleSelect}
                        defaultValue={initialSelectionIndex}
                        label="Dish type"
                    />
                    <Typography paragraph>
                        Selected value: {JSON.stringify(selectedOption)}
                    </Typography>
                </Box>
            </GroupHelper>
        </>
    );
                 }}
    </Story>
</Preview>

## Error And Disabled State Propagation

<Preview>
    <Story name="Error And Disabled State Propagation" height="600px">
         {() => {
const initialSelectionIndex = 2;
const options = ['Köfte', 'Pad Thai', 'Churrasco', 'Baozi'];
const [selectedOption, setSelectedOption] = useState();
const [selectedOptionLast, setSelectedOptionLast] = useState(
    options[initialSelectionIndex],
);
const [isDisabled, setIsDisabled] = useState(true);
const handleSelect = (option) => setSelectedOption(option);
const handleonSelect = (option) =>
    setSelectedOptionLast(option);
return (
<>
    <p>
        Provide user feedback in case of an invalid or incomplete
        selection
    </p>
    <GroupHelper gap={2}>
        <Box padding={3} style={{ flexDirection: 'column', width: '300px' }}>
            <div>
                <Dropdown
                    error={!selectedOption}
                    label="Select one"
                    options={options}
                    onSelect={handleSelect}
                />
                <Typography paragraph>
                    Selected value: {JSON.stringify(selectedOption)}
                </Typography>
            </div>
            <br />
            <br />
            <Dropdown
                disabled
                label="Disabled"
                options={options}
                onSelect={handleSelect}
            />
            <br />
            <br />
            <Dropdown
                disabled={isDisabled}
                label={`${
                    isDisabled ? 'Disabled' : 'Enabled'
                } with pre-selected`}
                options={options}
                onSelect={handleonSelect}
                selectedIndex={initialSelectionIndex}
            />
            <Typography paragraph>
                Selected value: {JSON.stringify(selectedOptionLast)}
            </Typography>
            <Button onClick={() => setIsDisabled(!isDisabled)}>
                {isDisabled ? 'Enable' : 'Disable'}
            </Button>
        </Box>
    </GroupHelper>
</>
);
                 }}
    </Story>
</Preview>

## Multi-select

<Preview>
    <Story name="Multiselect controlled mode" height="200px">
         {() => {
            const options = [
                 { value: 0, label: 'Biryani' },
                 { value: 1, label: 'Tacos' },
                 { value: 2, label: 'Pho' },
            ];
            const [selectedOption, setSelectedOption] = useState();
            const handleSelect = (option) => {
                setSelectedOption(option);
            };
         
            return (<Dropdown options={options} onSelect={handleSelect} label="Dish type" multiple />);
         }}
    </Story>
</Preview>
