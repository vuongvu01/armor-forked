import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { Button, Checkbox, Dialog, DialogTitle, DialogContent, DialogActions } from '../../../src/components/';
import { StoryHelper } from './StoryHelper';
import { LoremIpsum } from '../../../src/helpers/LoremIpsum';
import { Nodes } from '../../../src/helpers/Nodes';

<Meta title="Components/Dialog" component={Button} />

# Dialog

The `Dialog` component allows to display modal windows.

~~~js
import { Dialog, DialogTitle, DialogContent, DialogActions } from '@deliveryhero/armor';
~~~

## Basic usage

<Preview>
    <Story name="Basic usage">
        <StoryHelper>
            {({ open, setOpen }) => (
                 <>
                     <Dialog
                         open={open}
                         onClose={() => setOpen(false)}
                     >
                         <DialogTitle description="Your answer will define Galaxy's fate">
                             Would you like to have an icecream?
                         </DialogTitle>
                         <DialogActions>
                             <Button tertiary onClick={() => setOpen(false)}>
                                 No, I like pies
                             </Button>
                             <Button onClick={() => setOpen(false)}>Yes, of course</Button>
                         </DialogActions>
                     </Dialog>
                     <Button onClick={() => setOpen(true)} secondary>Ask an important question</Button>
                 </>
            )}
        </StoryHelper>
    </Story>
</Preview>

## With content

<Preview>
    <Story name="Usage with content">
        <StoryHelper>
            {({ open, setOpen, onClose }) => (
                 <>
                     <Dialog
                         open={open}
                         onClose={onClose}
                     >
                         <DialogTitle>
                             What would you like to buy?
                         </DialogTitle>
                         <DialogContent>
                             <Checkbox label="Pizza" />
                             <br />
                             <br />
                             <Checkbox label="Pasta" />
                             <br />
                             <br />
                             <Checkbox label="Risotto" />
                         </DialogContent>
                         <DialogActions>
                             <Button onClick={() => setOpen(false)}>Confirm order</Button>
                         </DialogActions>
                     </Dialog>
                     <Button onClick={() => setOpen(true)} secondary>Shopping list</Button>
                 </>
            )}
        </StoryHelper>
    </Story>
</Preview>

#### Disable overlay and close button

<Preview>
    <Story name="Disable overlay and close button">
        <StoryHelper>
            {({ open, setOpen, onClose }) => (
                <>
                    <Dialog
                        open={open}
                        onClose={onClose}
                        disableOverlay
                        disableCloseButton
                    >
                        <DialogTitle>
                            You cant close me, humble yourself and refresh the page!
                        </DialogTitle>
                    </Dialog>
                    <Button onClick={() => setOpen(true)} secondary>It's a trap</Button> 
                </>
            )}
        </StoryHelper>
    </Story>
</Preview>

#### Max width constraint

It is possible to control maximum width of the `Dialog` by utilizing `maxWidth` property. Currently, the following values are supported: `xs`, `sm`, `md`, `lg`, `xl`, and they actually come from `theme.breakpoints` (so if you have custom breakpoints then these values will also be different).

<Preview>
    <Story name="Max width constraint">
        <StoryHelper>
            {({ open, setOpen, onClose, setMaxWidth, maxWidth }) => (
                 <>
                     <Dialog
                         open={open}
                         onClose={onClose}
                         maxWidth={maxWidth}
                     >
                         <DialogTitle>
                             I have different width<br /><br />
                             <Button onClick={() => setMaxWidth('xs')} disabled={maxWidth === 'xs'}  marginRight={2} marginBottom={2}>XS</Button>
                              <Button onClick={() => setMaxWidth('sm')} disabled={maxWidth === 'sm'} marginRight={2} marginBottom={2}>SM</Button>
                              <Button onClick={() => setMaxWidth('md')} disabled={maxWidth === 'md'} marginRight={2} marginBottom={2}>MD</Button>
                              <Button onClick={() => setMaxWidth('lg')} disabled={maxWidth === 'lg'} marginRight={2} marginBottom={2}>LG</Button>
                              <Button onClick={() => setMaxWidth('xl')} disabled={maxWidth === 'xl'} marginRight={2} marginBottom={2}>XL</Button>
                         </DialogTitle>
                         <DialogContent>
                             This dialog always occupies as much of space as possible, because the content is huge.
                             <LoremIpsum />
                             <LoremIpsum />
                         </DialogContent>
                     </Dialog>
                     <Button onClick={() => setOpen(true)} secondary>I have different max width</Button>
                 </>
            )}
        </StoryHelper>
    </Story>
</Preview>

#### Wide dialog

It is also possible to expand width of the `Dialog` to 100% of the parent container (minus safe margins of course), or to `max-width`, if defined.

<Preview>
    <Story name="Wide dialog">
        <StoryHelper>
            {({ open, setOpen, onClose, wide, maxWidth, setMaxWidth, setWide }) => (
                 <>
                     <Dialog
                         open={open}
                         onClose={onClose}
                         maxWidth={maxWidth}
                         wide={wide}
                     >
                         <DialogTitle>
                              I have different width<br /><br />
                              <Button onClick={() => setMaxWidth('xs')} disabled={maxWidth === 'xs'} marginRight={2} marginBottom={2}>XS</Button>
                              <Button onClick={() => setMaxWidth('sm')} disabled={maxWidth === 'sm'} marginRight={2} marginBottom={2}>SM</Button>
                              <Button onClick={() => setMaxWidth('md')} disabled={maxWidth === 'md'} marginRight={2} marginBottom={2}>MD</Button>
                              <Button onClick={() => setMaxWidth('lg')} disabled={maxWidth === 'lg'} marginRight={2} marginBottom={2}>LG</Button>
                              <Button onClick={() => setMaxWidth('xl')} disabled={maxWidth === 'xl'} marginRight={2} marginBottom={2}>XL</Button>
                              <br />
                              <Button onClick={() => setWide(!wide)} secondary marginTop={2}>{wide ? 'Shrink to auto with' : 'Expand to 100% width'}</Button>
                         </DialogTitle>
                         <DialogContent>
                              This dialog has little content, but you can tell it to occupy all available space.
                         </DialogContent>
                     </Dialog>
                     <Button onClick={() => setOpen(true)} secondary>I have different width</Button>
                 </>
            )}
        </StoryHelper>
    </Story>
</Preview>

#### Scroll type

`Dialog` supports two ways to scroll: content scroll and document scroll. By default, the first one is used.

<Preview>
    <Story name="Scroll type">
        <StoryHelper>
            {({ open, setOpen, onClose, scrollType, setScrollType }) => (
                <>
                    <Dialog
                        open={open}
                        onClose={onClose}
                        maxWidth="md"
                        scroll={scrollType}
                    >
                        <DialogTitle>
                            I have different width<br /><br />
                            <Button onClick={() => setScrollType('dialog')} disabled={scrollType === 'dialog'} marginRight={2}>
                                Dialog
                            </Button>
                            <Button onClick={() => setScrollType('document')} disabled={scrollType === 'document'}>
                                Document
                            </Button>
                        </DialogTitle>
                        <DialogContent>
                            <LoremIpsum />
                            <LoremIpsum />
                        </DialogContent>
                    </Dialog>
                    <Button onClick={() => setOpen(true)} secondary>
                        I have different scroll types
                    </Button>
                </>
            )}
        </StoryHelper>
    </Story>
</Preview>

#### Disable effects

It is possible to disable transition effect on show / hide, if this is required.

<Preview>
    <Story name="Disable effects">
        <StoryHelper>
            {({ open, setOpen, onClose }) => (
                 <>
                     <Dialog
                         open={open}
                         onClose={onClose}
                         disableEffects
                     >
                         <DialogTitle>
                             I have no effects
                         </DialogTitle>
                         <DialogContent>
                             1, 2, 3
                         </DialogContent>
                     </Dialog>
                     <Button onClick={() => setOpen(true)} secondary>I have no effects</Button>
                 </>
            )}
        </StoryHelper>
    </Story>
</Preview>

## Properties

<Props of={Dialog} />

## Nodes

<Nodes 
    blockName="Dialog"
    nodes={[
        { element: 'Overlay', description: 'Global overlay' },
        { element: 'AlignmentContainer', description: 'An element that aligns the modal on the page' },
        { element: 'CloseButton', description: 'Close button in the right top corner' },
        { element: 'Content', description: 'An element that holds the content' },
    ]}
/>
