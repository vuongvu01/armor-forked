import {useState} from 'react'
import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { Select, Box, Typography } from '../../../src/components';
import { LoremIpsum } from '../../../src/helpers/LoremIpsum';
import { GroupHelper } from '../../../src/helpers/GroupHelper';
import { Nodes } from '../../../src/helpers/Nodes';

<Meta title="Components/Select" component={Select} />

# Select

~~~js
import { Select } from '@deliveryhero/armor';

const options: (string | { [key: string]: any; label: string; })[]  = ['Pizza ', 'Pasta', 'Risotto', 'Pepperoni']
const handleChange = (selectedOption: string | { [key: string]: any; label: string; }) => {...}

<Select
    options={options}
    onSelectionChange={handleChange}
    label="Choose one"
/>
~~~

## Minimum configuration

<Preview>
    <Story name="Minimum configuration" height="350px">
         {() => {
const [selectedOption, setSelectedOption] = useState();
const handleChange = (option) => {
    setSelectedOption(option);
};
return (
    <>
        <GroupHelper gap={2}>
            <Box padding={3}>
                <Select
                    options={['Pizza', 'Pasta', 'Risotto', 'Pepperoni']}
                    onSelectionChange={handleChange}
                    label="Choose one"
                />
                <Typography paragraph>
                    Selected value: {JSON.stringify(selectedOption)}
                </Typography>
            </Box>
        </GroupHelper>
    </>
);
                 }}
    </Story>
</Preview>

## Custom Option Item Format

<Preview>
    <Story name="Custom Option Item Format" height="750px">
         {() => {
const foodOptions = [
        { value: 1, label: 'Pizza' },
        { value: 2, label: 'Pasta' },
        { value: 3, label: 'Risotto' },
        { value: 4, label: 'Pepperoni' },
        { value: 5, label: 'Pizza' },
        { value: 6, label: 'Pasta' },
        { value: 7, label: 'Risotto' },
        { value: 8, label: 'Pepperoni' },
        { value: 9, label: 'Pizza' },
        { value: 10, label: 'Pasta' },
        { value: 11, label: 'Risotto' },
        { value: 12, label: 'Pepperoni' },
        { value: 13, label: 'Pizza' },
        { value: 14, label: 'Pasta' },
        { value: 15, label: 'Risotto' },
        { value: 16, label: 'Pepperoni' },
    ];
const [selectedOption, setSelectedOption] = useState();
const handleChange = (option) => {
    setSelectedOption(option);
};
return (
    <>
        <GroupHelper gap={2}>
            <h4>
                Using the following data. Only <code>label</code> is
                mandatory.{' '}
            </h4>
            <div>
                <code>{`[`}</code>
            </div>
            <div>
                <code>{`{ value: 1, label: 'Pizza' },`}</code>
            </div>
            <div>
                <code>{`{ value: 2, label: 'Pasta' },`}</code>
            </div>
            <div>
                <code>{`{ value: 3, label: 'Risotto' },`}</code>
            </div>
            <div>
                <code>{`  [...]`}</code>
            </div>
            <div>
                <code>{`]`}</code>
            </div>
            <br />
            <br />
            <Box padding={3} style={{
                flexDirection: 'column',
                width: '300px'
                }}>
                <Select
                    options={foodOptions}
                    onSelectionChange={handleChange}
                    label="Choose one"
                />
                <Typography paragraph>
                    Selected value: {JSON.stringify(selectedOption)}
                </Typography>
            </Box>
        </GroupHelper>
    </>
);
                 }}
    </Story>
</Preview>

## Pre-selected Value

<Preview>
    <Story name="Pre-selected Value" height="500px">
         {() => {
 const foodOptionsString = [
    'Pizza',
    'Pasta',
    'Risotto',
    'Pepperoni',
    'Pizza',
    'Pasta',
    'Risotto',
    'Pepperoni',
    'Pizza',
    'Pizza',
    'Pasta',
    'Risotto',
    'Pepperoni',
    'Pizza',
    'Pasta',
    'Risotto',
    'Pepperoni',
    'Pizza',
];
const initialSelectionIndex = 3;
const [selectedOption, setSelectedOption] = useState(
    foodOptionsString[initialSelectionIndex],
);
const handleChange = (option) => {
    setSelectedOption(option);
};
return (
    <>
        <GroupHelper gap={2}>
            <Box padding={3} style={{ flexDirection: 'column', width: '300px' }}>
                <Select
                    options={foodOptionsString}
                    onSelectionChange={handleChange}
                    selectedIndex={initialSelectionIndex}
                    label="Choose one"
                />
                <Typography paragraph>
                    Selected value: {JSON.stringify(selectedOption)}
                </Typography>
            </Box>
        </GroupHelper>
    </>
);
                 }}
    </Story>
</Preview>

## Error And Disabled State Propagation

<Preview>
    <Story name="Error And Disabled State Propagation" height="500px">
         {() => {
const [selectedOption, setSelectedOption] = useState();
const handleChange = (option) => {
    setSelectedOption(option);
};
return (
    <>
        <p>
            Provide user feedback in case of an invalid or incomplete
            selection
        </p>
        <GroupHelper gap={2}>
            <Box padding={3} style={{ flexDirection: 'column', width: '300px' }}>
                <div>
                    <Select
                        error={!selectedOption}
                        label="Choose one"
                        options={['Pizza', 'Pasta', 'Risotto', 'Pepperoni']}
                        onSelectionChange={handleChange}
                    />
                    <Typography paragraph>
                        Selected value: {JSON.stringify(selectedOption)}
                    </Typography>
                </div>
                <br />
                <br />
                <Select
                    disabled
                    label="Disabled"
                    options={['Pizza', 'Pasta', 'Risotto', 'Pepperoni']}
                    onSelectionChange={handleChange}
                />
                <br />
                <br />
                <Select
                    disabled
                    label="Disabled with pre-selected"
                    name="disabled_selector"
                    options={['Pizza', 'Pasta', 'Risotto', 'Pepperoni']}
                    onSelectionChange={handleChange}
                    value={'Pasta'}
                />
            </Box>
        </GroupHelper>
    </>
);
                 }}
    </Story>
</Preview>

## Properties

<Props of={Select} />
